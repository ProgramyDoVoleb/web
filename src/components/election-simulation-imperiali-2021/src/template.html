<div class="layout-imperiali" :class="{hide}">
	<!-- <p-block :level="hide ? 3 : 2" headline="Projednávaná verze">
		<p>Tato verze odpovídá dojednanému <outbound-link href="https://www.psp.cz/sqw/text/tiskt.sqw?o=8&ct=1170&ct1=1#prilohy">kompromisu v ústavně-právním výboru</outbound-link>. Konečné znění se může ještě měnit.</p>
	</p-block> -->
	<p-loader :rule="parties && tick">
		<div v-if="parties">
			<p-block :level="hide ? 3 : 2" headline="Rychlý přepočet">
				<p-area>
					<div class="graph-split">
						<div>
							<graph-mandates :circles="circles"></graph-mandates>
							<!-- <svg class="svg" ref="svg" viewBox="0 0 1152 576" width="100%" height="100%" :data-list="circles"><g><g class="parliament-chart"><circle r="17" cx="18.28713288376639" cy="548.5874974053364"></circle><circle r="17" cx="62.39624301259039" cy="548.6030237562688"></circle><circle r="17" cx="106.52546559918846" cy="548.623073657684"></circle><circle r="17" cx="150.68088890963338" cy="548.6495873034335"></circle><circle r="17" cx="194.87131293055103" cy="548.6856655126917"></circle><circle r="17" cx="239.1099305003002" cy="548.7365113835144"></circle><circle r="17" cx="283.4174148815328" cy="548.8113958152483"></circle><circle r="17" cx="23.07799153228177" cy="504.29140828341303"></circle><circle r="17" cx="67.36534519279121" cy="505.779569320081"></circle><circle r="17" cx="112.1521021434778" cy="504.73125502928804"></circle><circle r="17" cx="156.54602722238013" cy="506.57900950894225"></circle><circle r="17" cx="201.6805287133722" cy="505.42020340615426"></circle><circle r="17" cx="31.381393912403837" cy="460.5175651005117"></circle><circle r="17" cx="75.89865876506445" cy="463.52175600937164"></circle><circle r="17" cx="247.23742776798503" cy="503.81885886497963"></circle><circle r="17" cx="121.87304101960189" cy="461.5611944701897"></circle><circle r="17" cx="166.56209488530783" cy="465.2993322819865"></circle><circle r="17" cx="43.144591058574065" cy="417.5440496405474"></circle><circle r="17" cx="295.5979205380576" cy="494.8502655027384"></circle><circle r="17" cx="87.93638730547582" cy="422.1257016332253"></circle><circle r="17" cx="213.3847548700747" cy="463.2150293046059"></circle><circle r="17" cx="135.60247724085684" cy="419.49394637436046"></circle><circle r="17" cx="261.3257737837257" cy="460.40031183548064"></circle><circle r="17" cx="58.292854991499325" cy="375.6438594511716"></circle><circle r="17" cx="180.6299725863256" cy="425.21906057159026"></circle><circle r="17" cx="103.39417751880097" cy="381.88148530284616"></circle><circle r="17" cx="229.83093415183754" cy="422.6220641763798"></circle><circle r="17" cx="153.2192235322865" cy="378.900830807642"></circle><circle r="17" cx="76.72995344205765" cy="335.0831735741816"></circle><circle r="17" cx="198.6104441772178" cy="386.73482997308275"></circle><circle r="17" cx="122.16371033662017" cy="343.0711147283938"></circle><circle r="17" cx="317.63855323356245" cy="444.1119287835064"></circle><circle r="17" cx="281.11953040825955" cy="419.2680991755621"></circle><circle r="17" cx="98.33876118535358" cy="296.119661591806"></circle><circle r="17" cx="174.5677800290564" cy="340.1401559320189"></circle><circle r="17" cx="250.80399834989703" cy="384.1721459838359"></circle><circle r="17" cx="144.1134599534052" cy="305.9665500754303"></circle><circle r="17" cx="220.32557436090644" cy="350.22748161011"></circle><circle r="17" cx="122.98200410130505" cy="259.0008467309724"></circle><circle r="17" cx="199.45970684591572" cy="303.554055283635"></circle><circle r="17" cx="306.2598137558888" cy="381.1679958579467"></circle><circle r="17" cx="169.0896154817188" cy="270.82779822862994"></circle><circle r="17" cx="276.02968076242047" cy="348.36808786618997"></circle><circle r="17" cx="245.56046954459606" cy="316.0582933192216"></circle><circle r="17" cx="348.76427078999274" cy="398.38056089176683"></circle><circle r="17" cx="150.50313123497608" cy="223.96253342425416"></circle><circle r="17" cx="227.675287402319" cy="269.4654678213382"></circle><circle r="17" cx="196.91715876811253" cy="237.9010908170257"></circle><circle r="17" cx="180.72730931671998" cy="191.22730931671992"></circle><circle r="17" cx="274.0654044333442" cy="284.5654044333442"></circle><circle r="17" cx="305.1781028055523" cy="315.67810280555227"></circle><circle r="17" cx="336.2908011777604" cy="346.7908011777604"></circle><circle r="17" cx="227.40109081702576" cy="207.41715876811247"></circle><circle r="17" cx="258.96546782133834" cy="238.17528740231893"></circle><circle r="17" cx="213.46253342425422" cy="161.00313123497602"></circle><circle r="17" cx="387.8805608917669" cy="359.2642707899927"></circle><circle r="17" cx="305.55829331922155" cy="256.0604695445961"></circle><circle r="17" cx="337.86808786618997" cy="286.5296807624204"></circle><circle r="17" cx="260.32779822863006" cy="179.58961548171874"></circle><circle r="17" cx="370.66799585794683" cy="316.7598137558887"></circle><circle r="17" cx="293.0540552836352" cy="209.95970684591555"></circle><circle r="17" cx="248.5008467309725" cy="133.482004101305"></circle><circle r="17" cx="339.72748161010986" cy="230.8255743609065"></circle><circle r="17" cx="295.46655007543035" cy="154.61345995340514"></circle><circle r="17" cx="373.67214598383595" cy="261.303998349897"></circle><circle r="17" cx="329.64015593201896" cy="185.06778002905634"></circle><circle r="17" cx="285.61966159180605" cy="108.83876118535352"></circle><circle r="17" cx="408.76809917556227" cy="291.61953040825944"></circle><circle r="17" cx="433.61192878350647" cy="328.1385532335624"></circle><circle r="17" cx="332.5711147283939" cy="132.6637103366201"></circle><circle r="17" cx="376.2348299730827" cy="209.11044417721786"></circle><circle r="17" cx="324.5831735741817" cy="87.22995344205765"></circle><circle r="17" cx="368.40083080764225" cy="163.71922353228638"></circle><circle r="17" cx="412.1220641763799" cy="240.33093415183754"></circle><circle r="17" cx="371.3814853028463" cy="113.89417751880092"></circle><circle r="17" cx="414.71906057159015" cy="191.12997258632566"></circle><circle r="17" cx="365.1438594511717" cy="68.79285499149933"></circle><circle r="17" cx="449.9003118354808" cy="271.82577378372565"></circle><circle r="17" cx="408.9939463743606" cy="146.10247724085679"></circle><circle r="17" cx="452.7150293046059" cy="223.8847548700747"></circle><circle r="17" cx="411.62570163322533" cy="98.43638730547576"></circle><circle r="17" cx="484.3502655027384" cy="306.0979205380576"></circle><circle r="17" cx="407.04404964054766" cy="53.644591058574065"></circle><circle r="17" cx="454.7993322819865" cy="177.06209488530783"></circle><circle r="17" cx="451.0611944701898" cy="132.37304101960183"></circle><circle r="17" cx="493.31885886497986" cy="257.737427767985"></circle><circle r="17" cx="453.02175600937176" cy="86.3986587650644"></circle><circle r="17" cx="450.01756510051183" cy="41.88139391240384"></circle><circle r="17" cx="494.9202034061542" cy="212.1805287133722"></circle><circle r="17" cx="496.0790095089422" cy="167.04602722238013"></circle><circle r="17" cx="494.23125502928804" cy="122.6521021434778"></circle><circle r="17" cx="495.27956932008124" cy="77.86534519279121"></circle><circle r="17" cx="493.79140828341303" cy="33.57799153228177"></circle><circle r="17" cx="538.3113958152484" cy="293.9174148815328"></circle><circle r="17" cx="538.2365113835145" cy="249.6099305003002"></circle><circle r="17" cx="538.1856655126918" cy="205.37131293055097"></circle><circle r="17" cx="538.1495873034335" cy="161.18088890963338"></circle><circle r="17" cx="538.123073657684" cy="117.02546559918846"></circle><circle r="17" cx="538.1030237562688" cy="72.89624301259039"></circle><circle r="17" cx="538.0874974053365" cy="28.78713288376639"></circle><circle r="17" cx="613.9125025946635" cy="28.78713288376639"></circle><circle r="17" cx="613.8969762437312" cy="72.89624301259039"></circle><circle r="17" cx="613.876926342316" cy="117.02546559918846"></circle><circle r="17" cx="613.8504126965667" cy="161.18088890963338"></circle><circle r="17" cx="613.8143344873083" cy="205.37131293055103"></circle><circle r="17" cx="613.7634886164856" cy="249.6099305003002"></circle><circle r="17" cx="613.6886041847517" cy="293.9174148815328"></circle><circle r="17" cx="658.2085917165871" cy="33.57799153228177"></circle><circle r="17" cx="656.7204306799188" cy="77.86534519279121"></circle><circle r="17" cx="657.7687449707121" cy="122.6521021434778"></circle><circle r="17" cx="655.9209904910579" cy="167.0460272223802"></circle><circle r="17" cx="657.0797965938457" cy="212.18052871337215"></circle><circle r="17" cx="701.9824348994882" cy="41.88139391240384"></circle><circle r="17" cx="698.9782439906282" cy="86.3986587650644"></circle><circle r="17" cx="658.6811411350202" cy="257.737427767985"></circle><circle r="17" cx="700.9388055298103" cy="132.37304101960189"></circle><circle r="17" cx="697.2006677180136" cy="177.06209488530783"></circle><circle r="17" cx="744.9559503594523" cy="53.644591058574065"></circle><circle r="17" cx="667.6497344972615" cy="306.0979205380576"></circle><circle r="17" cx="740.3742983667748" cy="98.43638730547582"></circle><circle r="17" cx="699.2849706953941" cy="223.8847548700747"></circle><circle r="17" cx="743.0060536256395" cy="146.10247724085684"></circle><circle r="17" cx="702.0996881645192" cy="271.82577378372565"></circle><circle r="17" cx="786.8561405488283" cy="68.79285499149933"></circle><circle r="17" cx="737.2809394284097" cy="191.1299725863256"></circle><circle r="17" cx="780.6185146971537" cy="113.89417751880092"></circle><circle r="17" cx="739.8779358236202" cy="240.33093415183754"></circle><circle r="17" cx="783.5991691923579" cy="163.71922353228643"></circle><circle r="17" cx="827.4168264258185" cy="87.22995344205765"></circle><circle r="17" cx="775.7651700269174" cy="209.11044417721786"></circle><circle r="17" cx="819.4288852716062" cy="132.66371033662017"></circle><circle r="17" cx="718.3880712164935" cy="328.13855323356233"></circle><circle r="17" cx="743.2319008244378" cy="291.6195304082595"></circle><circle r="17" cx="866.380338408194" cy="108.83876118535358"></circle><circle r="17" cx="822.3598440679812" cy="185.0677800290564"></circle><circle r="17" cx="778.3278540161642" cy="261.30399834989703"></circle><circle r="17" cx="856.5334499245698" cy="154.61345995340525"></circle><circle r="17" cx="812.2725183898901" cy="230.8255743609065"></circle><circle r="17" cx="903.4991532690276" cy="133.48200410130505"></circle><circle r="17" cx="858.9459447163649" cy="209.95970684591566"></circle><circle r="17" cx="781.3320041420533" cy="316.75981375588873"></circle><circle r="17" cx="891.6722017713699" cy="179.58961548171874"></circle><circle r="17" cx="814.1319121338099" cy="286.5296807624204"></circle><circle r="17" cx="846.4417066807785" cy="256.0604695445961"></circle><circle r="17" cx="764.1194391082331" cy="359.2642707899927"></circle><circle r="17" cx="938.5374665757458" cy="161.00313123497614"></circle><circle r="17" cx="893.0345321786617" cy="238.175287402319"></circle><circle r="17" cx="924.5989091829742" cy="207.41715876811247"></circle><circle r="17" cx="971.2726906832801" cy="191.22730931671998"></circle><circle r="17" cx="877.9345955666558" cy="284.5654044333442"></circle><circle r="17" cx="846.8218971944477" cy="315.6781028055523"></circle><circle r="17" cx="815.7091988222396" cy="346.7908011777604"></circle><circle r="17" cx="955.0828412318874" cy="237.90109081702565"></circle><circle r="17" cx="924.3247125976809" cy="269.4654678213382"></circle><circle r="17" cx="1001.4968687650239" cy="223.9625334242541"></circle><circle r="17" cx="803.2357292100073" cy="398.38056089176683"></circle><circle r="17" cx="906.4395304554039" cy="316.0582933192216"></circle><circle r="17" cx="875.9703192375796" cy="348.36808786619"></circle><circle r="17" cx="982.9103845182813" cy="270.82779822863"></circle><circle r="17" cx="845.7401862441113" cy="381.16799585794683"></circle><circle r="17" cx="952.5402931540843" cy="303.55405528363514"></circle><circle r="17" cx="1029.017995898695" cy="259.00084673097246"></circle><circle r="17" cx="931.6744256390936" cy="350.22748161011003"></circle><circle r="17" cx="1007.8865400465947" cy="305.9665500754302"></circle><circle r="17" cx="901.196001650103" cy="384.1721459838359"></circle><circle r="17" cx="977.4322199709436" cy="340.1401559320189"></circle><circle r="17" cx="1053.6612388146466" cy="296.1196615918061"></circle><circle r="17" cx="870.8804695917405" cy="419.26809917556216"></circle><circle r="17" cx="834.3614467664377" cy="444.11192878350647"></circle><circle r="17" cx="1029.8362896633798" cy="343.0711147283938"></circle><circle r="17" cx="953.3895558227821" cy="386.7348299730827"></circle><circle r="17" cx="1075.2700465579424" cy="335.0831735741816"></circle><circle r="17" cx="998.7807764677136" cy="378.90083080764214"></circle><circle r="17" cx="922.1690658481625" cy="422.6220641763799"></circle><circle r="17" cx="1048.605822481199" cy="381.8814853028462"></circle><circle r="17" cx="971.3700274136744" cy="425.21906057159026"></circle><circle r="17" cx="1093.7071450085007" cy="375.6438594511717"></circle><circle r="17" cx="890.6742262162743" cy="460.4003118354808"></circle><circle r="17" cx="1016.3975227591432" cy="419.4939463743605"></circle><circle r="17" cx="938.6152451299254" cy="463.2150293046059"></circle><circle r="17" cx="1064.0636126945242" cy="422.12570163322516"></circle><circle r="17" cx="856.4020794619423" cy="494.85026550273835"></circle><circle r="17" cx="1108.855408941426" cy="417.5440496405477"></circle><circle r="17" cx="985.4379051146922" cy="465.29933228198655"></circle><circle r="17" cx="1030.126958980398" cy="461.56119447018966"></circle><circle r="17" cx="904.7625722320149" cy="503.8188588649798"></circle><circle r="17" cx="1076.1013412349357" cy="463.52175600937176"></circle><circle r="17" cx="1120.6186060875962" cy="460.51756510051183"></circle><circle r="17" cx="950.3194712866277" cy="505.42020340615426"></circle><circle r="17" cx="995.4539727776198" cy="506.5790095089422"></circle><circle r="17" cx="1039.8478978565222" cy="504.7312550292879"></circle><circle r="17" cx="1084.6346548072088" cy="505.7795693200812"></circle><circle r="17" cx="1128.9220084677181" cy="504.29140828341303"></circle><circle r="17" cx="868.5825851184673" cy="548.8113958152483"></circle><circle r="17" cx="912.8900694996998" cy="548.7365113835144"></circle><circle r="17" cx="957.128687069449" cy="548.6856655126918"></circle><circle r="17" cx="1001.3191110903666" cy="548.6495873034335"></circle><circle r="17" cx="1045.4745344008115" cy="548.623073657684"></circle><circle r="17" cx="1089.6037569874097" cy="548.6030237562688"></circle><circle r="17" cx="1133.7128671162336" cy="548.5874974053365"></circle></g></g></svg> -->
						</div>
						<div>
							<div class="p-line"></div>
							<p-box-group>
								<div v-for="(btn, index) in coalitions">
									<p-box :click="() => btn.selected = !btn.selected">
										<p-box-color v-if="btn.color && !btn.logo" :color="btn.color"></p-box-color>
										<p-box-image v-if="btn.hash" :src="btn.logo"></p-box-image>
										<!-- <p-box-color v-if="!btn.hash && btn.color" :color="btn.color"></p-box-color> -->
										<!-- <p-box-color v-if="!btn.hash && !btn.color" color="#888"></p-box-color> -->
										<p-box-label v-if="!btn.hash && btn.short">{{ btn.short }}</p-box-label>
										<p-box-ticker
										:background="btn.selected ? (btn.color || btn.color) : '#eee'"
										:color="btn.selected ? '#fff' : '#000'">{{ btn.value }}</p-box-ticker>
									</p-box>
								</div>
							</p-box-group>
							<div class="p-line"></div>
							<p-box-group>
								<p-box>
									<p-box-icon :type="coalitionSum > 100 ? 'icon-check' : 'icon-against'"></p-box-icon>
									<p-box-label>Většina</p-box-label>
								</p-box>
								<p-box>
									<p-box-icon :type="coalitionSum > 119 ? 'icon-check' : 'icon-against'"></p-box-icon>
									<p-box-label>Ústavní většina</p-box-label>
								</p-box>
								<p-box>
									<p-box-ticker>
										{{ coalitionSum }}
									</p-box-ticker>
									<p-box-label>
										mandátů
									</p-box-label>
								</p-box>
							</p-box-group>
						</div>
					</div>
				</p-area>
				
				<p-collapsible label="Jak je rychlý výsledek počítán?">
					<p>Výpočet podle nového volebního zákona vychází z účasti v jednotlivých krajích podle roku 2021, přičemž podle stejného roku mění míru podpory strany napříč kraji. Zahraniční voliči jsou počítání do Ústeckého kraje. U koalic se tyto koeficienty kalkulují společně. Následně probíhá rozdělení mandátů do krajů a podle toho se počítá zisk pro jednotlivé strany koalice. U nich se vychází ze známých a ohlášených kandidátek.</p>
					<p>Pokud použijete rozpad koalic na strany, berte prosím v potaz zvýšenou citlivost modelu na rozložení v krajích. Proto je vždy nutné je číst stylem "Pokud by byla účast a rozložení hlasů v krajích jako v roce 2021, pak by podle volebního modelu XYZ byl zisk mandátů stránám ...". Reálný zisk jednotlivým stranám může také ovlivnit preferenční hlasování (kroužkování), což ale není možné do modelu zanést.</p>
					
				</p-collapsible>
				<div class="p-line"></div>
			</p-block>
			<p-block headline="Podrobný výpočet" :level="hide ? 3 : 1">
				<p class="lead">Jednotlivé kroky výpočtu mandátů si můžete projít. Vedou nejen k určení počtu mandátů, ale také k určení, v kterém kraji je strana získá. U stran, kde jsou známé kandidátky, pak je také vidět poměr zvolených žen, nebo rozdělení podle členů koalice.</p>
			</p-block>
			<p-block :level="hide ? 3 : 2" headline="Volební účast v krajích">
				<p>Čím víc voličů v kraji je, tím víc křesel mu je rezervováno. Nemusí se ale využít všechny. Množství křesel se určí podle podílu volební účasti v jednotlivých krajích na celkovém počtu hlasů. Níže si můžete nastavit, které minulé volby chcete použít pro výpočet, nebo také nastavit účast vlastní. U každého také, do jakého kraje se mají započítávat zahraniční hlasy (cca 15 000 hlasů).</p>
				<!-- <p><strong class="red">Červeně</strong> jsou křesla přiřazená po dělení.</p>
				<p-flex :flex="28">
					<div>
						<h5>Účast v krajích nastavit podle ...</h5>
						<select v-model="selectedElectionID">
							<option :value="index" v-for="(election, index) in electionList">{{ election }}</option>
						</select>
					</div>
					<div>
						<h5>Zahraniční hlasy počítat do ...</h5>
						<select v-model="selectedOverseasID">
							<option :value="index" v-for="(region, index) in enums.regions">{{ region }}</option>
						</select>
					</div>
				</p-flex> -->
				<template v-if="[0, 4].indexOf(selectedElectionID) > -1">
					<h3 v-if="selectedElectionID === 4">Nastavení účasti</h3>
					<h4>Celorepubliková účast</h4>
					<p-box-group>
						<p-box>
							<p-box-label>Účast u voleb</p-box-label>
							<p-box-label>{{ attendanceCommon }} %</p-box-label>
						</p-box>
					</p-box-group>
					<h4>Účast v krajích</h4>
					<div class="columns-4">
						<template v-for="(region, index) in enums.regions">
							<div>
								<p-box-group>
									<p-box :block="true">
										<!-- <p-box-color></p-box-color> -->
										<p-box-label>
											{{ region }}
											<span v-if="selectedOverseasID === index"> + Zahr.</span>
										</p-box-label>
										<p-box-gap></p-box-gap>
										<p-box-label>
											{{ number(attendanceCustom[index] || 0, 2) }} %
											<!-- <input type="number" min=0 max=100 v-model.number="attendanceCustom[index]" @change="recalc" @input="recalc" :disabled="!!defined"> -->
										</p-box-label>
									</p-box>
								</p-box-group>
							</div>
						</template>
					</div>
					<h3>Rezervované mandáty</h3>
				</template>
				<div class="columns-4">
					<div v-for="(region, index) in enums.regions">
						<p-box-group>
							<p-box :block="true">
								<p-box-color :color="selectedChairsData[index].extra > 0 ? 'var(--red)' : 'transparent'"></p-box-color>
								<p-box-label>
									{{ region }}
									<span v-if="selectedOverseasID === index"> + Zahr.</span>
								</p-box-label>
								<p-box-gap></p-box-gap>
								<p-box-label>
									{{ selectedChairsData[index].chairs }}
									<span class="red small" v-if="selectedChairsData[index].extra > 0">
										 +{{ selectedChairsData[index].extra }}
									</span>
								</p-box-label>
							</p-box>
						</p-box-group>
					</div>
				</div>
				<h4>Poznámky:</h4>
				<div class="center">Rozděleno {{ sum }} křesel.</div>
				<div class="center" v-if="selectedElectionID === 4">Účast ve volbách by byla {{ number(turnout.sum) }} voličů, {{ turnout.pct }} %.</div>
			</p-block>
			<p-block :level="hide ? 3 : 2" headline="Strany a hlasy">
				<p>
					V druhém kroku jsou již důležité jednotlivé strany. Pro samostatně kandidující je nutné dosáhnout hranice 5 % hlasů, u koalic je 8 % u dvoukoalice, 11 % u ostatních. Zde si můžete vybrat zdroj dat: minulé volby, poslední průzkumy, nebo si je nastavit podle sebe.
				</p>
				<!-- <template> -->
		
					<!-- <div class="columns-4">
						<div>
							<select v-model="sourceSelectedID" @change="setSource">
								<option :value="0" v-if="defined">Použitý zdroj dat</option>
								<template v-if="polls">
									<option :value="index + 1" v-for="(poll, index) in polls.list">{{ poll.agency }}, {{ poll.date }}</option>
								</template>
								<option :value="12">Strany podle roku 2021</option>
								<option :value="11">Vlastní nastavení</option>
							</select>
						</div>
					</div>
					<div class="p-gap"></div> -->
					<div class="columns-4" :tick="results">
						<div v-for="(party, index) in results">
							<p-box-group>
								<p-box :block="true">
									<p-box-image v-if="party.hash" :src="$getParty(party.hash).logo"></p-box-image>
									<p-box-color v-if="!party.hash && party.color" :color="party.color"></p-box-color>
									<p-box-color v-if="!party.hash && !party.color" color="#888"></p-box-color>
									<p-box-label>{{ party.hash ? $getParty(party.hash).short : party.short }}</p-box-label>
									<p-box-gap></p-box-gap>
									<p-box-label>
										{{ number(party.rs) }} %
										<!-- <input type="number" v-model.number="party.rs" @change="redistributeWithDelay" class="input-short" :disabled="!!defined"> -->
									</p-box-label>
								</p-box>
							</p-box-group>
						</div>
					</div>
				<!-- </template> -->
				<!-- <h4>Rozložení hlasů do krajů</h4>
				<p>
					Dále můžete zvolit, zda budou procenta použita rovnoměrně ve všech krajích, nebo s přihlédnutím k minulým volbám. Koalice mají jako koeficient váženého rozložení součet jejich odchylek.
				</p>
				<div class="btn-group">
					<button @click="redistributeBasic">Prosté rozložení</button>
					<button @click="redistributeWeighted">Vážené rozložení</button>
				</div> -->
			</p-block>
			<p-block :level="hide ? 3 : 2" headline="Rozložení hlasů">
				<div class="scrollable nw">
					<table>
						<thead>
							<tr>
								<th>Strana</th>
								<th class="line-right text-right">Součet</th>
								<th v-for="(reg, i) in enums.regionsShort" class="text-right">{{ reg }}</th>
							</tr>
							<tr>
								<th></th>
								<th class="line-right text-right">{{ number(turnout.sum) }}</th>
								<th v-for="(reg, i) in enums.regionsShort" class="text-right">
									{{ number(turnout.voters[i]) }}
								</th>
							</tr>
						</thead>
						<tbody>
							<tr v-for="(party, index) in results">
								<td :class="{red: party.pct < party.requires}">
									{{ party.hash ? $getParty(party.hash).short : party.short }}
								</td>
								<td class="text-right line-right small">
									{{  number(party.votes.reduce((a, b) => a + b, 0)) }}
								</td>
								<td v-for="(reg, i) in enums.regionsShort" class="text-right  small">
									{{  number(party.votes[i]) }}
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td><strong>Ostatní</strong></td>
								<td class="line-right"></td>
								<td v-for="(rem, i) in remaining" :class="{red: rem < 0}" class="small text-right">
									{{  number(rem) }}
								</td>
							</tr>
						</tfoot>
					</table>
				</div>
			</p-block>
			<p-block :level="hide ? 3 : 2" headline="První scrutinium">
				<p>
					Nejprve se v každém kraji vezme součet hlasů pro strany, které postoupily, a vydělí se počtem přidělených mandátů plus 2.
				</p>
				<div class="columns">
					<div v-for="(region, index) in enums.regions">
						<p-area>
							<strong>{{ region }}</strong>
							<div class="stats-2 smaller">
								<ul>
									<li>
										<label>Hlasů</label>
										<div>
											{{
												number( firstScrutinize.votesForValidPartiesInRegions[index]) }}
										</div>
									</li>
									<li>
										<label>Přidělených mandátů</label>
										<div>
											{{ selectedChairsData[index].chairs }}
											<span class="red" v-if="selectedChairsData[index].extra > 0">
												+ {{ selectedChairsData[index].extra }}
											</span>
										</div>
									</li>
									<li>
										<label>Imperiali</label>
										<div>
											{{ firstScrutinize.regionalImperiali[index] }}
										</div>
									</li>
									<li>
										<label>Krajské volební číslo</label>
										<div>
											{{ firstScrutinize.regionalMandateNumber[index] }}
										</div>
									</li>
								</ul>
							</div>
						</p-area>
					</div>
				</div>
			</p-block>
			<p-block :level="hide ? 3 : 2" headline="Mandáty po 1. scrutiniu">
				<p>
					Rozložení mandátů v jednotlivých krajích a stranám. Červené číslo ukazuje, že po použití Imperialiho kvóty bylo přesaženo povolený počet přiřazených mandátů a strana s nejmenším zbytkem po dělení o mandát přichází. Šedě jsou zbytky po dělení.
				</p>
				<div class="columns-4" :tick="results">
					<template v-for="(party, index) in firstScrutinize.parties">
						<div>
							<p-box-group>
								<p-box :block="true">
									<p-box-image v-if="party.party.hash" :src="$getParty(party.party.hash).logo"></p-box-image>
									<p-box-color v-if="!party.party.hash && party.party.color" :color="party.party.color"></p-box-color>
									<p-box-color v-if="!party.party.hash && !party.party.color" color="#888"></p-box-color>
									<!-- <p-box-image :src="$getParty(party.party.hash).logo"></p-box-image> -->
									<p-box-label>{{ party.party.hash ? $getParty(party.party.hash).short : party.party.short }}</p-box-label>
									<p-box-gap></p-box-gap>
									<p-box-ticker>
										{{ party.mandates }}
									</p-box-ticker>
								</p-box>
							</p-box-group>
						</div>
					</template>
				</div>
				<div class="p-gap"></div>
				<p-collapsible label="Mandáty stran v krajích">
					<div class="scrollable">
						<table>
							<thead>
								<tr>
									<th>Strana</th>
									<th class="line-right">Součet</th>
									<th v-for="(reg, i) in enums.regionsShort">{{ reg }}</th>
								</tr>
							</thead>
							<tbody>
								<template v-for="(obj, index) in firstScrutinize.parties">
									<tr v-if="obj.mandates > 0">
										<td :class="{red: obj.party.pct < obj.party.requires}">
											{{ obj.party.hash ? $getParty(obj.party.hash).short : obj.party.short }}
										</td>
										<td class="line-right">
											{{ obj.mandates }}
											<div class="small dimm">
												{{ number(obj.remaining) }}
											</div>
										</td>
										<td v-for="(reg, i) in enums.regionsShort">
											{{ obj.region[i].mandates }}
											<span class="red small" v-if="obj.region[i].reduced > 0">- {{ obj.region[i].reduced }}</span>
											<div class="small dimm">
												{{  number(obj.region[i].remaining) }}
											</div>
										</td>
									</tr>
								</template>
							</tbody>
							<tfoot>
								<tr>
									<td><strong>Součty</strong></td>
									<td class="line-right">
										{{ firstScrutinize.totalDistributedSum }}
									</td>
									<td v-for="(rem, i) in firstScrutinize.regionalDistributedSum">
										{{ rem }}
									</td>
								</tr>
								<tr>
									<td>Max</td>
									<td class="line-right">
										200
									</td>
									<td v-for="(reg, i) in enums.regionsShort">
										{{ selectedChairsData[i].total }}
									</td>
								</tr>
								<tr>
									<td>Nevyužité</td>
									<td class="line-right">
										{{ 200 - firstScrutinize.totalDistributedSum }}
									</td>
									<td v-for="(reg, i) in enums.regionsShort">
										{{ selectedChairsData[i].total - firstScrutinize.regionalDistributedSum[i] }}
									</td>
								</tr>
							</tfoot>
						</table>
					</div>
				</p-collapsible>
			</p-block>
			<p-block :level="hide ? 3 : 2" headline="Druhé scrutinium" v-if="secondScrutiny">
				<p>
					V druhém kroku se sečtou zbytky stran a vydělí počtem nepřiřazených mandátů plus 1. Toto se stává republikovým mandátovým číslem. Nevyužité mandáty jsou poté přikázány podle zůstatku po dělení. Při překročení vlivem zvýšené kvóty se odečítá straně s nejmenším zbytkem po dělení.
				</p>
				<div class="columns">
					<div>
						<p-area>
							<div class="stats-2 smaller">
								<ul>
									<li>
										<label>Nevyužitých mandátů</label>
										<div>{{ 200 - firstScrutinize.totalDistributedSum }}</div>
									</li>
									<li>
										<label>Zvýšená kvóta</label>
										<div>{{ 200 - firstScrutinize.totalDistributedSum + 1 }}</div>
									</li>
									<li>
										<label>Nevyužitých hlasů</label>
										<div>{{ number(firstScrutinize.totalRemainingSum) }}</div>
									</li>
								</ul>
							</div>
						</p-area>
					</div>
					<div>
						<p-area>
							<div class="stats-2 smaller">
								<ul>
									<li>
										<label>Republikové volební číslo</label>
										<div>{{ secondScrutiny.countryVotingNumber }}</div>
									</li>
									<li>
										<label>Přímo přiřazeno</label>
										<div>{{ secondScrutiny.sumDistributed }}</div>
									</li>
									<li>
										<label>Přiřazeno zbytkem po dělení</label>
										<div>{{ 200 - firstScrutinize.totalDistributedSum -  secondScrutiny.sumDistributed }}</div>
									</li>
								</ul>
							</div>
						</p-area>
					</div>
				</div>
				<div class="p-gap"></div>
				<h3>Přidělené mandáty</h3>
				<div class="columns-4" :tick="results">
					<template v-for="(party, index) in secondScrutiny.parties">
						<div v-if="party.firstMandates > 0">
							<p-box-group>
								<p-box :block="true">
									<p-box-image v-if="party.party.hash" :src="$getParty(party.party.hash).logo"></p-box-image>
									<p-box-color v-if="!party.party.hash && party.party.color" :color="party.party.color"></p-box-color>
									<p-box-color v-if="!party.party.hash && !party.party.color" color="#888"></p-box-color>
									<p-box-label>{{ party.party.hash ? $getParty(party.party.hash).short : party.party.short }}</p-box-label>
									<p-box-gap></p-box-gap>
									<p-box-ticker>
										{{ party.mandates }}
										<span class="red" v-if="party.extra > 0">
											+{{ party.extra }}
										</span>
									</p-box-ticker>
								</p-box>
							</p-box-group>
						</div>
					</template>
				</div>
				<div class="p-gap"></div>
				<p-collapsible label="Přidělení do krajů" v-if="secondDistribution">
					<div class="columns-4">
						<template v-for="(party, index) in secondDistribution.parties">
							<p-area v-if="party.mandatesToGive > 0" :key="'sdpa_' + index">
								<p-box-group>
									<p-box>
										<p-box-image :src="$getParty(party.hash).logo"></p-box-image>
										<p-box-label>
											{{ party.hash ? $getParty(party.hash).short : party.short }}
										</p-box-label>
									</p-box>
								</p-box-group>
								<ul>
									<template v-for="(region, index2) in party.regions">
										<li v-if="region.mandates.second > 0">
											{{ enums.regions[index2] }}
										</li>
									</template>
								</ul>
							</p-area>
						</template>
					</div>
				</p-collapsible>
			</p-block>
			<p-block :level="hide ? 3 : 2" headline="Celkový zisk mandátů" v-if="mandateTotal">
				<div class="columns-4" :tick="results">
					<template v-for="(party, index) in mandateTotal">
						<div v-if="party.mandates > 0">
							<p-box-group>
								<p-box :block="true">
									<p-box-image v-if="party.party.hash" :src="$getParty(party.party.hash).logo"></p-box-image>
									<p-box-color v-if="!party.party.hash && party.party.color" :color="party.party.color"></p-box-color>
									<p-box-color v-if="!party.party.hash && !party.party.color" color="#888"></p-box-color>
									<p-box-label>{{ party.party.hash ? $getParty(party.party.hash).short : party.party.short }}</p-box-label>
									<p-box-gap></p-box-gap>
									<p-box-ticker>
										{{ party.mandates }}
									</p-box-ticker>
								</p-box>
							</p-box-group>
						</div>
					</template>
				</div>
			</p-block>
			<p-block :level="hide ? 3 : 2" headline="Rozdělení do krajů">
				<p>
					Nyní už víme rozdělení mandátů všech úspěšných stran do všech krajů. Lze tak modelovat, kolik kandidátů z jaké strany a jakého kraje by se do Sněmovny dostalo.
				</p>
				<p-loader type="table" :rule="genom">
					<div v-if="genom">
						<div class="scrollable" v-if="secondDistribution">
							<table>
								<thead>
									<tr>
										<th>Strana</th>
										<th class="line-right">Mandátů</th>
										<th v-for="(reg, i) in enums.regionsShort">{{ reg }}</th>
									</tr>
								</thead>
								<tbody>
									<template v-for="(party, index) in secondDistribution.parties">
										<template v-if="party.mandates > 0">
											<tr>
												<td>
													<strong>
														{{ party.hash ? $getParty(party.hash).short : party.short }}
													</strong>
												</td>
												<td class="line-right">{{ party.mandates }}</td>
												<td v-for="(reg, i) in enums.regionsShort" :class="{'dimm small': party.regions[i].mandates.total === 0}">
													{{ party.regions[i].mandates.total }}
												</td>
											</tr>
											<template v-if="sourceSelectedID === 12">
												<tr class="small dimm">
													<td>muži</td>
													<td class="line-right small">
														{{ party.sex.male }}
													</td>
													<td v-for="(reg, i) in enums.regionsShort">
														 {{ getSexCount(party.hash, party.regions[i].mandates.total, i, 1) }}
													</td>
												</tr>
												<tr class="small dimm">
													<td>ženy</td>
													<td class="line-right small">
														{{ party.sex.female }}
													</td>
													<td v-for="(reg, i) in enums.regionsShort">
														{{ getSexCount(party.hash, party.regions[i].mandates.total, i, 2) }}
													</td>
												</tr>
											</template>
											<!-- <tr class="small dimm">
												<td>neznámý kandidát</td>
												<td class="line-right small">
													{{ party.mandates - party.sex.male - party.sex.female }}
												</td>
												<td v-for="(reg, i) in enums.regionsShort">
													{{ party.regions[i].mandates.total - getSexCount(party.hash, party.regions[i].mandates.total, i, 2, true) - getSexCount(party.hash, party.regions[i].mandates.total, i, 1, true) }}
												</td>
											</tr> -->
											<template v-if="party.hash === 'pirati-a-starostove'">
												<tr class="small dimm">
													<td>Piráti</td>
													<td class="line-right">
														{{ party.members.pirati }}
													</td>
													<td v-for="(reg, i) in enums.regionsShort">
														{{ getNomineeCount(party.hash, party.regions[i].mandates.total, i, 720) }}
													</td>
												</tr>
												<tr class="small dimm">
													<td>STAN</td>
													<td class="line-right">
														{{ party.members.stan }}
													</td>
													<td v-for="(reg, i) in enums.regionsShort">
														{{ getNomineeCount(party.hash, party.regions[i].mandates.total, i, 166) }}
													</td>
												</tr>
											</template>
											<template v-if="party.hash === 'spolu-ods-kducsl-top09'">
												<tr class="small dimm">
													<td>ODS</td>
													<td class="line-right">
														{{ party.members.ods }}
													</td>
													<td v-for="(reg, i) in enums.regionsShort">
														{{ getNomineeCount(party.hash, party.regions[i].mandates.total, i, 53) }}
													</td>
												</tr>
												<tr class="small dimm">
													<td>KDU-ČSL</td>
													<td class="line-right">
														{{ party.members.kducsl }}
													</td>
													<td v-for="(reg, i) in enums.regionsShort">
														{{ getNomineeCount(party.hash, party.regions[i].mandates.total, i, 1) }}
													</td>
												</tr>
												<tr class="small dimm">
													<td>TOP 09</td>
													<td class="line-right">
														{{ party.members.top09 }}
													</td>
													<td v-for="(reg, i) in enums.regionsShort">
														{{ getNomineeCount(party.hash, party.regions[i].mandates.total, i, 721) }}
													</td>
												</tr>
											</template>
										</template>
									</template>
								</tbody>
								<tfoot>
									<tr>
										<td><strong>Součty</strong></td>
										<td class="line-right"><strong>200</strong></td>
										<td v-for="(rem, i) in secondDistribution.regions">
											<strong>{{ rem.mandates }}</strong>
										</td>
									</tr>
								</tfoot>
							</table>
						</div>
					</div>
				</p-loader>
			</p-block>
			<p-block :level="hide ? 3 : 2" headline="Koalice a většina">
				<p>
					Ve Sněmovně jsou důležité dvě čísla pro vládnoucí strany. Většina poslanců a ústavní většina. Pro mnoho zákonů a úkonů stačí většina prostá, ale když dojde na hlasování silou, nebo protože to ukládá zákon, je dobré držet 101, resp 120 hlasů.
				</p>
				<p-box-group>
					<div v-for="(btn, index) in coalitions">
						<p-box :click="() => btn.selected = !btn.selected">
							<p-box-color v-if="btn.color && !btn.logo" :color="btn.color"></p-box-color>
							<p-box-image v-if="btn.hash" :src="$getParty(btn.hash).logo"></p-box-image>
							<!-- <p-box-color v-if="!btn.hash && btn.color" :color="btn.color"></p-box-color> -->
							<!-- <p-box-color v-if="!btn.hash && !btn.color" color="#888"></p-box-color> -->
							<p-box-label v-if="!btn.hash && btn.short">{{ btn.short }}</p-box-label>
							<p-box-ticker
							:background="btn.selected ? (btn.color || $getParty(btn.hash).color) : '#eee'"
							:color="btn.selected ? '#fff' : '#000'">{{ btn.value }}</p-box-ticker>
						</p-box>
					</div>
				</p-box-group>
				<div class="bar">
					<div class="bar-flex">
						<div class="bar-item"
							v-for="(party, index) in coalitions"
							:style="{background: (party.color || $getParty(party.hash).color), width: (party.selected ? party.value / 2 : 0) + '%'}"
		
						></div>
					</div>
					<div class="bar-ident-50"></div>
					<div class="bar-ident-60"></div>
				</div>
				<p-box-group>
					<p-box>
						<p-box-ticker>
							{{ coalitionSum }}
						</p-box-ticker>
						<p-box-label>
							mandátů
						</p-box-label>
					</p-box>
					<p-box>
						<p-box-icon :type="coalitionSum > 100 ? 'icon-check' : 'icon-against'"></p-box-icon>
						<p-box-label>Většina</p-box-label>
					</p-box>
					<p-box>
						<p-box-icon :type="coalitionSum > 119 ? 'icon-check' : 'icon-against'"></p-box-icon>
						<p-box-label>Ústavní většina</p-box-label>
					</p-box>
				</p-box-group>
			</p-block>

		</div>
	</p-loader>
</div>
