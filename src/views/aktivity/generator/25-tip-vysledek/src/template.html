<div class="layout-activity text-center">
	<p-layout-simple>
		<section>
			<h1>Můj tip na výsledek</h1>
			<p>Naklikejte si, jak to podle vás u letošních voleb 3. a 4. října dopadne, a vygenerovaný graf s výsledky pak můžete kdekoli sdílet.</p>
		</section>
		<template v-if="parties">
			<section>
				<h2>Nejprve vyberte 8 až 10 stran</h2>
				<p>Může to být těch <button class="inline" @click="addMainEight">osm hlavních stran</button>, které se nyní objevují v průzkumech, ale klidně to mohou být jakékoli jiné strany.</p>
				<div class="_pbg">
					<div class="p-list _025">
						<div v-for="party in list">
							<p-box-group>
								<p-box>
									<p-box-image :src="logoByItem(party.item, parties)"></p-box-image>
									<p-box-label>{{ party.item.ZKRATKA }}</p-box-label>
								</p-box>
								<p-box-gap></p-box-gap>
								<p-box>
									<p-box-label class="_r">
										<input type="number" min="1" max="100" v-model="party.value">
										<span class="_pct dimm">%</span>
									</p-box-label>
								</p-box>
								<p-box :click="() => removeItem(party)">
									<p-box-icon type="icon-against"></p-box-icon>
								</p-box>
							</p-box-group>
						</div>
						<div class="smallest dimm" v-if="list.find(x => x.value > 0)">
							Součet je {{ list.reduce((a, b) => a + b.value, 0) }} %
						</div>
						<div v-if="valid">
							<input type="number" min="10" max="100" v-model="att" placeholder="(Volitelně) účast">
						</div>
						<div v-if="valid">
							<input type="text" maxlength="10" v-model="username" placeholder="(Volitelně) jméno nebo přezdívka">
						</div>
						<div class="smaller">
							<div class="p-gap _05"></div>
							<p-modal>
								<template #init> <span class="strong green">přidat stranu</span></template>
								<template #content>
									<p-columns class="_2_4 smaller">
										<div v-for="party in sortBy(parties.list[0].$strany, 'ZKRATKA', null, true)">
											<button class="inline" @click="handleParty(party)" :class="{'strong green': list.find(x => x.item.id === party.id)}">{{ party.ZKRATKA }}</button>
										</div>
									</p-columns>
									<template v-if="list.length === 10">
										<div class="p-line"></div>
										<div class="smallest strong">
											<p-label color="var(--red)">Dosáhli jsme maximálního počtu stran</p-label>
										</div>
									</template>
								</template>
							</p-modal>
						</div>
					</div>
				</div>
			</section>
			<section v-if="valid">
				<div class="_pbg">
					<election-simulation-imperiali-2021 :defined="defined" :hide="true" :tickDefined="1" @update="(data) => setMandates(data, 'mandates')"></election-simulation-imperiali-2021>
					<results-parties-graph-shareable :list="listOfParties" :mandates="mandates" :mandatesSince="mandatesSince" :about="data" :username="(username ? username + ' - ' : '') + date(today)"></results-parties-graph-shareable>
				</div>
			</section>
		</template>
	</p-layout-simple>
</div>